# Tinklo Irengini≈≥ Skaitytuvas / Network Device Scanner

A Python-based network scanning agent that discovers devices on a local network and stores their information in a SQLite database.

## Features

- **Multi-platform support**: Works on Windows, Linux, and macOS
- **Device Detection**: Scans for connected devices on the network
- **Data Collection**:
  - IP Address (IP adresas)
  - MAC Address (MAC adresas)
  - Hostname (Host name)
  - Data Transfer Rate (Duomenu perdavimo greitis)
- **Database Storage**: Stores all device information in SQLite database named `tinklo_vardas_irenginiai_data.db`
- **Device History**: Maintains scan timestamps for tracking changes over time

## Requirements

- Python 3.6+
- Operating system with ARP support:
  - **Windows**: Built-in `arp` command
  - **Linux**: Built-in `arp` command or `arp-scan` utility
  - **macOS**: Built-in `arp` command

## Installation

1. Clone or download the project
2. Ensure Python 3.6+ is installed
3. Install dependencies (required only for Supabase support):

```bash
pip install -r requirements.txt
```

4. Optional: Create virtual environment
```bash
# On Windows
python -m venv venv
venv\Scripts\activate

# On Linux/macOS
python -m venv venv
source venv/bin/activate
```

## Configuration

### SQLite (Default)
No configuration needed. The scanner creates `tinklo_vardas_irenginiai_data.db` in the current directory.

### Supabase PostgreSQL (Browser-based Management)

1. Create a Supabase project at https://supabase.com
2. Create the `irenginiai` table via SQL Editor:
```sql
CREATE TABLE irenginiai (
    id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    ip_adresas TEXT UNIQUE NOT NULL,
    mac_adresas TEXT,
    host_name TEXT,
    duomenu_perdavimo_greitis TEXT,
    scan_time TIMESTAMP DEFAULT NOW()
);
```

3. Set environment variables:
```bash
# On Windows (PowerShell)
$env:SUPABASE_URL="https://your-project.supabase.co"
$env:SUPABASE_KEY="your-anon-key"

# On Windows (Command Prompt)
set SUPABASE_URL=https://your-project.supabase.co
set SUPABASE_KEY=your-anon-key

# On Linux/macOS
export SUPABASE_URL="https://your-project.supabase.co"
export SUPABASE_KEY="your-anon-key"
```

4. Install Supabase client:
```bash
pip install supabase
```

Find your `SUPABASE_URL` and anon key in your Supabase dashboard under **Settings ‚Üí API ‚Üí Project URL & API keys**.

## Usage

### Basic Scan

```bash
# SQLite (default)
python network_scanner.py

# Or with Supabase (requires SUPABASE_URL and SUPABASE_KEY env vars)
python network_scanner.py
```

This will:
1. Scan the local network for connected devices
2. Resolve IP addresses to hostnames
3. Measure response times
4. Store all data in SQLite database OR Supabase PostgreSQL
5. Display results in a formatted table

### Advanced Usage

```python
from network_scanner import NetworkScanner

# SQLite backend (default)
scanner = NetworkScanner()

# Or Supabase backend (auto-detect from env vars)
scanner = NetworkScanner(use_supabase=True)

# Or force backend
scanner = NetworkScanner(use_supabase=False)  # Force SQLite

# Run scan
scanner.scan_network()

# Save results
scanner.save_to_database()

# Display results
scanner.print_results()

# Or retrieve data programmatically
devices = scanner.get_all_devices()
for device in devices:
    print(f"{device['ip_adresas']} - {device['host_name']}")
```

### Browser-based Management (Supabase)

Once data is saved to Supabase, manage it directly via the browser:
1. Go to your Supabase dashboard
2. Navigate to **SQL Editor** or **Table Editor**
3. View, edit, filter, and delete device records
4. Export data as CSV or JSON
5. Set up real-time notifications with webhooks

## Database

### SQLite (Local)
- File: `tinklo_vardas_irenginiai_data.db` (created in current directory)
- Table: `irenginiai`
- Default storage backend (no setup required)

### Supabase PostgreSQL (Cloud)
- Managed via browser dashboard
- Real-time updates
- Scalable for large networks
- Built-in authentication & access control

## Database Schema

The database contains a table named `irenginiai` with the following columns:

| Column | Type | Description |
|--------|------|-------------|
| id | INTEGER/BIGINT | Primary key (auto-increment) |
| ip_adresas | TEXT | IP address of the device |
| mac_adresas | TEXT | MAC address of the device |
| host_name | TEXT | Hostname of the device |
| duomenu_perdavimo_greitis | TEXT | Data transfer rate/ping response time |
| scan_time | TIMESTAMP | When the device was scanned |

## Platform-Specific Notes

### Windows
- Uses native `arp` command
- Requires administrator privileges for some features
- Data transfer rate shown as ping response time in milliseconds

### Linux
- Uses `/proc/net/arp` or `arp-scan` utility
- May require `sudo` privileges
- Install `arp-scan`: `sudo apt-get install arp-scan` (Debian/Ubuntu)

### macOS
- Uses native `arp` command
- Works with standard user privileges
- Data transfer rate shown as ping response time in milliseconds

## Output

The scanner displays results in a formatted table:

```
====================================================================================================
Tinklo irenginiai / Network Devices
====================================================================================================
IP Adresas      MAC Adresas          Host Name                 Duomenu Greitis      Scan Time
----------------------------------------------------------------------------------------------------
192.168.1.1     00:11:22:33:44:55     router                    2ms response time    2024-01-15 10:30:45
192.168.1.100   aa:bb:cc:dd:ee:ff     laptop                    5ms response time    2024-01-15 10:30:50
====================================================================================================
```

## Troubleshooting

### No devices found
- Ensure network is connected
- On Linux, you may need to install `arp-scan`: `sudo apt-get install arp-scan`
- Check if firewall is blocking ARP requests

### Permission denied (Linux)
- Some operations require root privileges: `sudo python network_scanner.py`

### Hostname resolution fails
- The scanner will show "Unknown" for unresolvable hostnames
- This is normal for devices without DNS entries

## License

This project is open source and available for educational and personal use.

---

## üöÄ Vercel Cloud Deployment

Deploy to Vercel serverless for cloud-based scanning with web dashboard:

**Quick Start**: See [VERCEL_QUICKSTART.md](VERCEL_QUICKSTART.md)

### Features
- ‚òÅÔ∏è Serverless Python function at `/api/scan`
- üìä Web-based dashboard at `/`
- üóÑÔ∏è Supabase PostgreSQL backend
- üîÑ Auto-deploy from GitHub
- ‚ö° Real-time device discovery

### Deploy Button (if GitHub repo created)
[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2FYOUR_USERNAME%2Fnetwork-scanner)

---

## üìö Additional Resources

- [Vercel Deployment Guide](VERCEL_DEPLOYMENT.md) - Detailed setup instructions
- [Vercel Quick Start](VERCEL_QUICKSTART.md) - 5-minute deployment
- [Copilot Instructions](.github/copilot-instructions.md) - For AI coding agents
